name: CI on Pull Request

on:
  pull_request:
    branches:
      - '*'

jobs:
  compile:
    runs-on: ubuntu-22.04

    steps:
      - name: "ë ˆí¬ì§€í† ë¦¬ë¥¼ ì²´í¬ì•„ì›ƒí•œë‹¤."
        uses: actions/checkout@v4

      - name: "Gradle Wrapper ë¬´ê²°ì„±ì„ ê²€ì¦í•œë‹¤."
        uses: gradle/actions/wrapper-validation@v4

      - name: "JDK 21ì„ ì„¤ì •í•œë‹¤."
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: '21'
          cache: 'gradle'

      - name: "Kotlin ì†ŒìŠ¤ë¥¼ ì»´íŒŒì¼í•œë‹¤."
        run: ./gradlew compileKotlin --configuration-cache --build-cache

      - name: "Discordë¡œ ë¹Œë“œ ì‹¤íŒ¨ë¥¼ ì•Œë¦°ë‹¤"
        # if: failure()
        uses: Ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        with:
          args: |
            âŒ **CI ë„ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.**
            branch : `${{ github.head_ref }}`
            pull-request : `${{ github.event.pull_request.title }}`
            [ğŸ”— ì‘ì—… ìš”ì•½ ë³´ê¸°](https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }})
